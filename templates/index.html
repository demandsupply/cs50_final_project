{% extends "layout.html" %}

{% block main %}
        <form action="/" method="get">
            <input type="text" name="movie" placeholder="movie">
            <input type="submit" value="search">
        </form>

        <h2>{{ movie }}</h2>
        <p>list of movies:</p>
        <p>{{ response }}</p>

        <table>
            <thead>
                <tr>
                    <td>number</td>
                    <td>title</td>
                    <td>title</td>
                    <td>rating</td>
                    <td>id</td>
                </tr>
            </thead>
            <tbody>
                {% set counter = namespace(value=1) %}
                {% for dict_page in json_response %}

                    {% for item in dict_page["results"] %}
                    <tr>
                        <td>{{ counter.value }}</td>
                        {% set counter.value = counter.value + 1%}
                        <td><a href="https://www.themoviedb.org/movie/{{ item["id"] }} {{ item["title"] }}">{{ item["original_title"] }}</a></td>
                        <td><a href="movie/{{ item["id"] }} ">{{ item["original_title"] }}</a></td>
                        <td>{{ item["vote_average"] }}</td>
                        <td>{{ item["id"] }}</td>
                    </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>

{% endblock%}
